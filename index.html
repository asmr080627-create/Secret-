<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>마녀의 비밀상점 ✨</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&family=Gowun+Dodum&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Baloo 2', cursive;
    background: radial-gradient(circle at top, #2a1b3d, #1c0f2e 80%);
    color: #f5e9ff;
    overflow-x: hidden;
  }

  header {
    text-align: center;
    padding: 40px 20px 20px 20px;
  }

  header h1 {
    margin: 0;
    font-size: 2.5em;
    color: #e3c6ff;
    text-shadow: 0 0 15px #9d6dff, 0 0 25px #c9a6ff;
  }

  nav {
    text-align: center;
    margin: 10px 0 30px 0;
  }

  nav button {
    background: linear-gradient(135deg, #7b2ff7, #f107a3);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 30px;
    margin: 0 5px;
    cursor: pointer;
    font-size: 1em;
    box-shadow: 0 0 10px rgba(200,150,255,0.5);
    transition: all 0.3s ease;
  }

  nav button:hover {
    background: linear-gradient(135deg, #9f5fff, #ff4fd8);
    transform: scale(1.08);
    box-shadow: 0 0 20px rgba(230,200,255,0.8);
  }

  .container {
    max-width: 850px;
    margin: auto;
    padding: 20px;
  }

  .card {
    background: rgba(50, 20, 80, 0.6);
    border-radius: 25px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 0 20px rgba(180,120,255,0.4), inset 0 0 15px rgba(100,50,180,0.3);
    backdrop-filter: blur(8px);
  }

  .card h3 {
    margin: 0 0 10px 0;
    color: #e5d0ff;
    text-shadow: 0 0 5px #a06bff;
  }

  input[type="text"], input[type="password"], textarea, select {
    width: 100%;
    padding: 12px;
    border-radius: 15px;
    border: 1px solid #b68cff;
    margin-top: 7px;
    box-sizing: border-box;
    font-family: 'Gowun Dodum', sans-serif;
    background: rgba(255,255,255,0.1);
    color: #f5e9ff;
  }

  textarea {
    resize: vertical;
  }

  .total {
    text-align: right;
    font-weight: bold;
    margin-top: 10px;
    font-size: 1.3em;
    color: #ffd7ff;
    text-shadow: 0 0 10px #b68cff;
  }

  button.action {
    background: linear-gradient(135deg, #a56dff, #d17bff);
    border: none;
    color: white;
    padding: 14px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1em;
    margin-top: 12px;
    width: 100%;
    transition: all 0.3s ease;
    box-shadow: 0 0 15px rgba(180,120,255,0.6);
  }

  button.action:hover {
    background: linear-gradient(135deg, #c58dff, #ff9bff);
    transform: scale(1.05);
    box-shadow: 0 0 25px rgba(220,170,255,0.8);
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 0.9em;
  }

  table, th, td {
    border: 1px solid #7c5cc0;
  }

  th, td {
    padding: 10px;
    text-align: left;
  }

  th {
    background: rgba(120,80,180,0.7);
    color: #fff;
  }

  td {
    background: rgba(40,20,60,0.5);
  }

  .hidden { display: none; }

  .delete-btn {
    background: #ff5f87;
    padding: 5px 10px;
    border-radius: 12px;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 0.85em;
    box-shadow: 0 0 10px #ff85b8;
  }

  .delete-btn:hover {
    background: #ff3370;
    box-shadow: 0 0 15px #ff6fa1;
  }
</style>
</head>
<body>

<header>
  <h1>🔮 마녀의 비밀상점 🌙</h1>
</header>

<nav>
  <button onclick="showPage('shop')">마법 상점</button>
  <button onclick="showLogin()">마녀의 비밀서재</button>
</nav>

<div class="container">
  <!-- 🏪 상점 -->
  <div id="shop" class="page">
    <div class="card">
      <h3>마녀의 별빛 티세트</h3>
      <label><input type="checkbox" class="item" data-price="12000"> 선택 (₩12,000)</label><br>
      <label>옵션:
        <select class="option">
          <option value="0">기본</option>
          <option value="2000">별가루 추가 (+₩2,000)</option>
        </select>
      </label>
    </div>

    <div class="card">
      <h3>신비한 크리스탈</h3>
      <label><input type="checkbox" class="item" data-price="18000"> 선택 (₩18,000)</label><br>
      <label>옵션:
        <select class="option">
          <option value="0">기본</option>
          <option value="3000">빛나는 효과 (+₩3,000)</option>
        </select>
      </label>
    </div>

    <div class="card">
      <h3>마녀의 모자</h3>
      <label><input type="checkbox" class="item" data-price="15000"> 선택 (₩15,000)</label><br>
      <label>옵션:
        <select class="option">
          <option value="0">기본</option>
          <option value="5000">별 장식 추가 (+₩5,000)</option>
        </select>
      </label>
    </div>

    <div class="total">총 합계: ₩<span id="total">0</span></div>

    <div class="card">
      <h3>주문서 작성</h3>
      <form id="orderForm">
        <label>이름: <input type="text" id="name" required></label><br><br>
        <label>연락처: <input type="text" id="contact" required></label><br><br>
        <label>주소: <textarea id="address" required></textarea></label><br><br>
        <button type="submit" class="action">✨ 주문하기 ✨</button>
      </form>
    </div>
  </div>

  <!-- 🔑 로그인 -->
  <div id="login" class="page hidden">
    <div class="card">
      <h3>🔒 마녀의 비밀서재 입장</h3>
      <input type="password" id="adminPass" placeholder="비밀번호 입력">
      <button class="action" onclick="checkLogin()">입장하기</button>
    </div>
  </div>

  <!-- 📜 관리자 -->
  <div id="admin" class="page hidden">
    <div class="card">
      <h3>📜 주문 내역</h3>
      <table id="orderTable">
        <tr><th>이름</th><th>연락처</th><th>주소</th><th>주문 내용</th><th>금액</th><th>삭제</th></tr>
      </table>
    </div>
  </div>
</div>

<script>
let total = 0;

function calculateTotal() {
  total = 0;
  document.querySelectorAll('.card').forEach(card => {
    const item = card.querySelector('.item');
    const option = card.querySelector('.option');
    if (item && item.checked) {
      let price = parseInt(item.dataset.price);
      if (option) price += parseInt(option.value);
      total += price;
    }
  });
  document.getElementById('total').textContent = total.toLocaleString();
}

document.querySelectorAll('.item, .option').forEach(el => {
  el.addEventListener('change', calculateTotal);
});

document.getElementById('orderForm').addEventListener('submit', function(e) {
  e.preventDefault();
  if (total === 0) {
    alert("상품을 선택해주세요!");
    return;
  }
  const name = document.getElementById('name').value;
  const contact = document.getElementById('contact').value;
  const address = document.getElementById('address').value;

  let orderDetails = [];
  document.querySelectorAll('.card').forEach(card => {
    const item = card.querySelector('.item');
    const option = card.querySelector('.option');
    if (item && item.checked) {
      let product = card.querySelector('h3').textContent;
      let optionText = option ? option.options[option.selectedIndex].text : "";
      orderDetails.push(product + " (" + optionText + ")");
    }
  });

  let order = {
    name,
    contact,
    address,
    details: orderDetails.join(", "),
    price: total
  };

  let orders = JSON.parse(localStorage.getItem("orders")) || [];
  orders.push(order);
  localStorage.setItem("orders", JSON.stringify(orders));

  alert("주문이 완료되었습니다!");
  this.reset();
  calculateTotal();
});

function showPage(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
  document.getElementById(page).classList.remove('hidden');
}

function showLogin() {
  showPage('login');
}

function checkLogin() {
  const pass = document.getElementById('adminPass').value;
  if (pass === "1234") { // 🔑 관리자 비밀번호
    loadOrders();
    showPage('admin');
  } else {
    alert("비밀번호가 틀렸습니다!");
  }
}

function loadOrders() {
  const table = document.getElementById('orderTable');
  table.innerHTML = "<tr><th>이름</th><th>연락처</th><th>주소</th><th>주문 내용</th><th>금액</th><th>삭제</th></tr>";
  let orders = JSON.parse(localStorage.getItem("orders")) || [];
  orders.forEach((order, index) => {
    let row = table.insertRow();
    row.insertCell(0).innerText = order.name;
    row.insertCell(1).innerText = order.contact;
    row.insertCell(2).innerText = order.address;
    row.insertCell(3).innerText = order.details;
    row.insertCell(4).innerText = "₩" + order.price.toLocaleString();
    let delCell = row.insertCell(5);
    let delBtn = document.createElement("button");
    delBtn.innerText = "삭제";
    delBtn.className = "delete-btn";
    delBtn.onclick = () => { deleteOrder(index); };
    delCell.appendChild(delBtn);
  });
}

function deleteOrder(index) {
  let orders = JSON.parse(localStorage.getItem("orders")) || [];
  orders.splice(index, 1);
  localStorage.setItem("orders", JSON.stringify(orders));
  loadOrders();
}
</script>
</body>
</html>